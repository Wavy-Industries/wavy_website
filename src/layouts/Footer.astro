---
import '../styles/global.css';
import { routes } from '../routes';
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'footer'> {
    variant?: 'light' | 'dark';
}

const { variant = 'light', ...rest } = Astro.props as Props;

// get the current year
let year = new Date().getFullYear();

// images
import discordImg from '../assets/icons/Discord blue mark.svg';
import instagramImg from '../assets/icons/instagram.svg';
import mailImg from '../assets/icons/newspaper.svg';
---

<footer class={variant} {...rest}>
    <div>
        <span>Wavy Industries AS ¬© {year} Org nr. 935955335</span>
        <span>üìçNorway</span>
        <a href={routes.wavyDiscord} target="_blank"><span><img alt="Discord channel link" src={discordImg.src} /> Discord</span></a>
        <a href={routes.wavyIndstagram} target="_blank"><span><img alt="Instagram link" src={instagramImg.src} /> Instagram</span></a>
        <a href={routes.newsletter} target="_blank"><img alt="newsletter" src={mailImg.src} /> Newsletter</a>
        <a id="something-special-footer-a"><span id="something-special-footer"></span></a>
    </div>
</footer>

<style>
footer {
    display: flex;
    align-items: end;
    height: auto;
}

footer[hide] {
    height: 0;
    padding: 0;
    overflow: hidden;
}

/* Shared structure */
footer > div {
    width: 100vw;
    font-style: normal;
    font-size: 13px;
    font-weight: 300;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    flex-wrap: wrap;
    padding: 16px 20px;
}

/* Light theme (default) */
footer.light > div {
    background-color: #ffffff;
    color: #333;
    border-top: 1px solid #eaeaea;
}

footer.light img {
    filter: brightness(0%);
}

/* Dark theme */
footer.dark > div {
    background-color: #0d0d0d;
    color: #bdbdbd;
    border-top: 1px solid #1f1f1f;
}

footer.dark img {
    filter: none; /* show original brand colors on dark footer */
}

footer > div > * {
    padding: 0.5rem 1rem;
}

img { height: 12px; }

span {
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

a:hover span {
    text-decoration: underline;
}
</style>

<script>
function doSomethingSpecial() {
    let special = document.getElementById('something-special-footer');
    let specialA = document.getElementById('something-special-footer-a') as HTMLAnchorElement;
    let special1 = "hell"
    let special2 = "o"
    special.innerHTML = special1 + special2 + "@"+ "wavyindustries.com";
    specialA.href = "mai" + "lto:" + special1 + special2 + "@" + "wavyindustries.com";
}
setTimeout(doSomethingSpecial, 100);
</script>